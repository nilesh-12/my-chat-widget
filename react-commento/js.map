{"version":3,"file":"index.js","sources":["../src/components/CommentsPage/CommentPageContext.tsx","../src/utils/axios/index.ts","../src/utils/turndown/index.ts","../src/utils/commentoApi.ts","../src/components/CommentsPage/CommentPageReducer/actions.ts","../node_modules/immer/dist/immer.module.js","../src/components/CommentsPage/CommentPageReducer/reducer.ts","../src/components/Comment/CommentActions.tsx","../src/components/Comment/UserDetails.tsx","../src/components/Comment/EditComment.tsx","../src/components/CommentsPage/AddNewComment.tsx","../src/components/Comment/index.tsx","../node_modules/babel-plugin-transform-async-to-promises/helpers.js","../src/components/CommentoAuthContext/index.tsx","../src/assets/loading.gif","../src/components/CommentsPage/index.tsx","../src/components/CommentsCount/index.tsx"],"sourcesContent":["import React, { useContext } from 'react'\nimport { UserDetails } from '../../interfaces'\n\ninterface CommentPageContextValues {\n  pageId: string\n  currentCommenterDetails: UserDetails\n  commenters: UserDetails[]\n  commentDispatch: React.Dispatch<{\n    type: string\n    payload: any\n  }>\n}\n\nexport const CommentPageContext = React.createContext<CommentPageContextValues>(\n  {\n    pageId: '',\n    currentCommenterDetails: {} as UserDetails,\n    commenters: [] as UserDetails[],\n    commentDispatch: () => {}\n  }\n)\nexport const useCommentPageContext = () => useContext(CommentPageContext)\n","import axios, { AxiosInstance } from 'axios'\n\nlet _axios: AxiosInstance\nexport const getAxiosInstance = () => _axios\nexport const initializeAxiosInstance = async (\n  commentoOrigin: string,\n  commenterToken: string,\n  domain: string,\n  auth0Token: string\n) => {\n  _axios = axios.create({\n    baseURL: commentoOrigin,\n    headers: {\n      Authorization: `Bearer ${auth0Token}`\n    },\n    data: {\n      commenterToken,\n      domain\n    }\n  })\n}\n","import TurnDownService from 'turndown'\n\nexport const turndownService = new TurnDownService()\nexport default turndownService\n","import { getAxiosInstance } from './axios'\nimport { CommentDetails, UserDetails } from '../interfaces'\nimport _axios from 'axios'\nimport turndownService from './turndown'\n\nexport const ssoAuth = async (\n  commentoOrigin: string,\n  ssoToken: string\n): Promise<{\n  commenterToken?: string\n  success: boolean\n  userDetails?: UserDetails\n}> => {\n  const { commenterToken, success: authenticationSucess } = await _axios\n    .get(`${commentoOrigin}/api/oauth/sso`, {\n      headers: {\n        Authorization: `Bearer ${ssoToken}`\n      }\n    })\n    .then(res => res.data)\n  const {\n    commenter,\n    success: selfGetSuccess\n  } = await _axios\n    .post(`${commentoOrigin}/api/commenter/self`, { commenterToken })\n    .then(res => res.data)\n  if (authenticationSucess && selfGetSuccess)\n    return { commenterToken, success: true, userDetails: commenter }\n  return { success: false }\n}\n\nexport const getSelfDetails = async (commenterToken: string) => {\n  const { commenter, success } = await getAxiosInstance()\n    .post('/api/commenter/self', {\n      commenterToken\n    })\n    .then(res => res.data)\n  if (success) return { commenter, success }\n  return { success }\n}\n\nexport const fetchComments = async (\n  pageId: string\n): Promise<{ comments: CommentDetails[]; commenters: UserDetails[] }> => {\n  const axios = getAxiosInstance()\n  const { comments, commenters } = await axios\n    .post('/api/comment/list', {\n      path: pageId,\n      ...axios.defaults.data\n    })\n    .then(res => res.data)\n  return { commenters, comments }\n}\n\nexport const voteComment = async (direction: number, commentHex: string) => {\n  const axios = getAxiosInstance()\n  const { success } = await axios\n    .post('/api/comment/vote', {\n      commentHex,\n      direction,\n      ...axios.defaults.data\n    })\n    .then(res => res.data)\n  return success\n}\n\nexport const deleteComment = async (commentHex: string) => {\n  const axios = getAxiosInstance()\n  const { success } = await axios\n    .post('/api/comment/delete', {\n      commentHex,\n      ...axios.defaults.data\n    })\n    .then(res => res.data)\n  return success\n}\n\nexport const updateComment = async (\n  commentDetails: CommentDetails,\n  newCommentBody: string\n): Promise<{ comment?: CommentDetails; success: boolean }> => {\n  const axios = getAxiosInstance()\n  const { html, success } = await axios\n    .post('/api/comment/edit', {\n      markdown: newCommentBody,\n      commentHex: commentDetails.commentHex,\n      ...axios.defaults.data\n    })\n    .then(res => res.data)\n  if (success)\n    return {\n      comment: {\n        ...commentDetails,\n        html,\n        markdown: turndownService.turndown(html)\n      },\n      success\n    }\n  return { success }\n}\n\nexport const addNewComment: (params: {\n  commentMarkdown: string\n  path: string\n  commenterHex: string\n}) => Promise<{ comment: CommentDetails; success: boolean }> = async ({\n  commentMarkdown,\n  path,\n  commenterHex\n}) => {\n  const axios = getAxiosInstance()\n  const { commentHex, success, html } = await axios\n    .post('/api/comment/new', {\n      markdown: commentMarkdown,\n      path,\n      parentHex: 'root',\n      ...axios.defaults.data\n    })\n    .then(res => res.data)\n  const comment: CommentDetails = createComment({\n    commentHex,\n    html,\n    markdown: commentMarkdown,\n    parentHex: 'root',\n    commenterHex\n  })\n  return { comment, success }\n}\n\nexport const addReplyToComment: (params: {\n  commentMarkdown: string\n  path: string\n  parentHex: string\n  commenterHex: string\n}) => Promise<{ comment: CommentDetails; success: boolean }> = async ({\n  commentMarkdown,\n  parentHex,\n  path,\n  commenterHex\n}) => {\n  const axios = getAxiosInstance()\n  const { commentHex, success, html } = await axios\n    .post('/api/comment/new', {\n      markdown: commentMarkdown,\n      path,\n      parentHex,\n      ...axios.defaults.data\n    })\n    .then(res => res.data)\n\n  const comment: CommentDetails = createComment({\n    commentHex,\n    html,\n    markdown: commentMarkdown,\n    parentHex,\n    commenterHex\n  })\n  return { comment, success }\n}\n\nconst createComment: (params: {\n  parentHex: string\n  commentHex: string\n  commenterHex: string\n  markdown: string\n  html: string\n}) => CommentDetails = ({\n  commentHex,\n  commenterHex,\n  html,\n  markdown,\n  parentHex\n}) => ({\n  markdown,\n  parentHex,\n  commentHex,\n  commenterHex,\n  html,\n  deleted: false,\n  score: 0,\n  direction: 0,\n  replies: {},\n  creationDate: new Date().toISOString()\n})\n\nexport enum CommentSortTypes {\n  asc = 'old comments first',\n  desc = 'new comments first'\n}\nexport const sortCommentByCreationDate = (\n  type: CommentSortTypes,\n  comments: CommentDetails[]\n): CommentDetails[] =>\n  comments.sort((a, b) => {\n    const timeA = new Date(a.creationDate).getTime()\n    const timeB = new Date(b.creationDate).getTime()\n    if (type === CommentSortTypes.asc) return timeA - timeB\n    else if (type === CommentSortTypes.desc) return timeB - timeA\n    // Default to new comments first\n    return timeB - timeA\n  })\n","export enum CommentPageActions {\n  COMMENTS_LOADED = 'COMMENTS_LOADED',\n  UPVOTE_COMMENT = 'UPVOTE_COMMENT',\n  DOWNVOTE_COMMENT = 'DOWNVOTE_COMMENT',\n  ADD_NEW_COMMENT = 'ADD_NEW_COMMENT',\n  ADD_REPLY = 'ADD_REPLY',\n  UPDATE_COMMENT = 'UPDATE_COMMENT',\n  DELETE_COMMENT = 'DELETE_COMMENT'\n}\n","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar NOTHING = typeof Symbol !== \"undefined\" ? Symbol(\"immer-nothing\") : defineProperty({}, \"immer-nothing\", true);\n\nvar DRAFT_STATE = typeof Symbol !== \"undefined\" ? Symbol(\"immer-state\") : \"__$immer_state\";\n\nfunction isDraft(value) {\n    return !!value && !!value[DRAFT_STATE];\n}\n\nfunction isDraftable(value) {\n    if (!value) return false;\n    if ((typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) !== \"object\") return false;\n    if (Array.isArray(value)) return true;\n    var proto = Object.getPrototypeOf(value);\n    return proto === null || proto === Object.prototype;\n}\n\nfunction original(value) {\n    if (value && value[DRAFT_STATE]) {\n        return value[DRAFT_STATE].base;\n    }\n    // otherwise return undefined\n}\n\nvar assign = Object.assign || function assign(target, value) {\n    for (var key in value) {\n        if (has(value, key)) {\n            target[key] = value[key];\n        }\n    }\n    return target;\n};\n\nfunction shallowCopy(value) {\n    if (Array.isArray(value)) return value.slice();\n    var target = value.__proto__ === undefined ? Object.create(null) : {};\n    return assign(target, value);\n}\n\nfunction each(value, cb) {\n    if (Array.isArray(value)) {\n        for (var i = 0; i < value.length; i++) {\n            cb(i, value[i], value);\n        }\n    } else {\n        for (var key in value) {\n            cb(key, value[key], value);\n        }\n    }\n}\n\nfunction has(thing, prop) {\n    return Object.prototype.hasOwnProperty.call(thing, prop);\n}\n\nfunction is(x, y) {\n    // From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n    if (x === y) {\n        return x !== 0 || 1 / x === 1 / y;\n    } else {\n        return x !== x && y !== y;\n    }\n}\n\nfunction generatePatches(state, basePath, patches, inversePatches) {\n    Array.isArray(state.base) ? generateArrayPatches(state, basePath, patches, inversePatches) : generateObjectPatches(state, basePath, patches, inversePatches);\n}\n\nfunction generateArrayPatches(state, basePath, patches, inversePatches) {\n    var base = state.base,\n        copy = state.copy,\n        assigned = state.assigned;\n\n    var minLength = Math.min(base.length, copy.length);\n\n    // Look for replaced indices.\n    for (var i = 0; i < minLength; i++) {\n        if (assigned[i] && base[i] !== copy[i]) {\n            var path = basePath.concat(i);\n            patches.push({ op: \"replace\", path: path, value: copy[i] });\n            inversePatches.push({ op: \"replace\", path: path, value: base[i] });\n        }\n    }\n\n    // Did the array expand?\n    if (minLength < copy.length) {\n        for (var _i = minLength; _i < copy.length; _i++) {\n            patches.push({\n                op: \"add\",\n                path: basePath.concat(_i),\n                value: copy[_i]\n            });\n        }\n        inversePatches.push({\n            op: \"replace\",\n            path: basePath.concat(\"length\"),\n            value: base.length\n        });\n    }\n\n    // ...or did it shrink?\n    else if (minLength < base.length) {\n            patches.push({\n                op: \"replace\",\n                path: basePath.concat(\"length\"),\n                value: copy.length\n            });\n            for (var _i2 = minLength; _i2 < base.length; _i2++) {\n                inversePatches.push({\n                    op: \"add\",\n                    path: basePath.concat(_i2),\n                    value: base[_i2]\n                });\n            }\n        }\n}\n\nfunction generateObjectPatches(state, basePath, patches, inversePatches) {\n    var base = state.base,\n        copy = state.copy;\n\n    each(state.assigned, function (key, assignedValue) {\n        var origValue = base[key];\n        var value = copy[key];\n        var op = !assignedValue ? \"remove\" : key in base ? \"replace\" : \"add\";\n        if (origValue === base && op === \"replace\") return;\n        var path = basePath.concat(key);\n        patches.push(op === \"remove\" ? { op: op, path: path } : { op: op, path: path, value: value });\n        inversePatches.push(op === \"add\" ? { op: \"remove\", path: path } : op === \"remove\" ? { op: \"add\", path: path, value: origValue } : { op: \"replace\", path: path, value: origValue });\n    });\n}\n\nfunction applyPatches(draft, patches) {\n    for (var i = 0; i < patches.length; i++) {\n        var patch = patches[i];\n        var path = patch.path;\n\n        if (path.length === 0 && patch.op === \"replace\") {\n            draft = patch.value;\n        } else {\n            var base = draft;\n            for (var _i3 = 0; _i3 < path.length - 1; _i3++) {\n                base = base[path[_i3]];\n                if (!base || (typeof base === \"undefined\" ? \"undefined\" : _typeof(base)) !== \"object\") throw new Error(\"Cannot apply patch, path doesn't resolve: \" + path.join(\"/\")); // prettier-ignore\n            }\n            var key = path[path.length - 1];\n            switch (patch.op) {\n                case \"replace\":\n                case \"add\":\n                    // TODO: add support is not extensive, it does not support insertion or `-` atm!\n                    base[key] = patch.value;\n                    break;\n                case \"remove\":\n                    if (Array.isArray(base)) {\n                        if (key !== base.length - 1) throw new Error(\"Only the last index of an array can be removed, index: \" + key + \", length: \" + base.length); // prettier-ignore\n                        base.length -= 1;\n                    } else {\n                        delete base[key];\n                    }\n                    break;\n                default:\n                    throw new Error(\"Unsupported patch operation: \" + patch.op);\n            }\n        }\n    }\n    return draft;\n}\n\n// @ts-check\n\nvar descriptors = {};\n\n// For nested produce calls:\nvar scopes = [];\nvar currentScope = function currentScope() {\n    return scopes[scopes.length - 1];\n};\n\nfunction willFinalize(result, baseDraft, needPatches) {\n    var scope = currentScope();\n    scope.forEach(function (state) {\n        return state.finalizing = true;\n    });\n    if (result === undefined || result === baseDraft) {\n        if (needPatches) markChangesRecursively(baseDraft);\n        // This is faster when we don't care about which attributes changed.\n        markChangesSweep(scope);\n    }\n}\n\nfunction createDraft(base, parent) {\n    var draft = void 0;\n    if (isDraft(base)) {\n        var _state = base[DRAFT_STATE];\n        // Avoid creating new drafts when copying.\n        _state.finalizing = true;\n        draft = shallowCopy(_state.draft);\n        _state.finalizing = false;\n    } else {\n        draft = shallowCopy(base);\n    }\n    each(base, function (prop) {\n        Object.defineProperty(draft, \"\" + prop, createPropertyProxy(\"\" + prop));\n    });\n\n    // See \"proxy.js\" for property documentation.\n    var state = {\n        scope: parent ? parent.scope : currentScope(),\n        modified: false,\n        finalizing: false, // es5 only\n        finalized: false,\n        assigned: {},\n        parent: parent,\n        base: base,\n        draft: draft,\n        copy: null,\n        revoke: revoke,\n        revoked: false // es5 only\n    };\n\n    createHiddenProperty(draft, DRAFT_STATE, state);\n    state.scope.push(state);\n    return draft;\n}\n\nfunction revoke() {\n    this.revoked = true;\n}\n\nfunction source(state) {\n    return state.copy || state.base;\n}\n\nfunction _get(state, prop) {\n    assertUnrevoked(state);\n    var value = source(state)[prop];\n    // Drafts are only created for proxyable values that exist in the base state.\n    if (!state.finalizing && value === state.base[prop] && isDraftable(value)) {\n        prepareCopy(state);\n        return state.copy[prop] = createDraft(value, state);\n    }\n    return value;\n}\n\nfunction _set(state, prop, value) {\n    assertUnrevoked(state);\n    state.assigned[prop] = true;\n    if (!state.modified) {\n        if (is(source(state)[prop], value)) return;\n        markChanged(state);\n        prepareCopy(state);\n    }\n    state.copy[prop] = value;\n}\n\nfunction markChanged(state) {\n    if (!state.modified) {\n        state.modified = true;\n        if (state.parent) markChanged(state.parent);\n    }\n}\n\nfunction prepareCopy(state) {\n    if (!state.copy) state.copy = shallowCopy(state.base);\n}\n\nfunction createPropertyProxy(prop) {\n    return descriptors[prop] || (descriptors[prop] = {\n        configurable: true,\n        enumerable: true,\n        get: function get$$1() {\n            return _get(this[DRAFT_STATE], prop);\n        },\n        set: function set$$1(value) {\n            _set(this[DRAFT_STATE], prop, value);\n        }\n    });\n}\n\nfunction assertUnrevoked(state) {\n    if (state.revoked === true) throw new Error(\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + JSON.stringify(state.copy || state.base));\n}\n\n// This looks expensive, but only proxies are visited, and only objects without known changes are scanned.\nfunction markChangesSweep(scope) {\n    // The natural order of drafts in the `scope` array is based on when they\n    // were accessed. By processing drafts in reverse natural order, we have a\n    // better chance of processing leaf nodes first. When a leaf node is known to\n    // have changed, we can avoid any traversal of its ancestor nodes.\n    for (var i = scope.length - 1; i >= 0; i--) {\n        var state = scope[i];\n        if (state.modified === false) {\n            if (Array.isArray(state.base)) {\n                if (hasArrayChanges(state)) markChanged(state);\n            } else if (hasObjectChanges(state)) markChanged(state);\n        }\n    }\n}\n\nfunction markChangesRecursively(object) {\n    if (!object || (typeof object === \"undefined\" ? \"undefined\" : _typeof(object)) !== \"object\") return;\n    var state = object[DRAFT_STATE];\n    if (!state) return;\n    var base = state.base,\n        draft = state.draft,\n        assigned = state.assigned;\n\n    if (!Array.isArray(object)) {\n        // Look for added keys.\n        Object.keys(draft).forEach(function (key) {\n            // The `undefined` check is a fast path for pre-existing keys.\n            if (base[key] === undefined && !has(base, key)) {\n                assigned[key] = true;\n                markChanged(state);\n            } else if (!assigned[key]) {\n                // Only untouched properties trigger recursion.\n                markChangesRecursively(draft[key]);\n            }\n        });\n        // Look for removed keys.\n        Object.keys(base).forEach(function (key) {\n            // The `undefined` check is a fast path for pre-existing keys.\n            if (draft[key] === undefined && !has(draft, key)) {\n                assigned[key] = false;\n                markChanged(state);\n            }\n        });\n    } else if (hasArrayChanges(state)) {\n        markChanged(state);\n        assigned.length = true;\n        if (draft.length < base.length) {\n            for (var i = draft.length; i < base.length; i++) {\n                assigned[i] = false;\n            }\n        } else {\n            for (var _i = base.length; _i < draft.length; _i++) {\n                assigned[_i] = true;\n            }\n        }\n        for (var _i2 = 0; _i2 < draft.length; _i2++) {\n            // Only untouched indices trigger recursion.\n            if (assigned[_i2] === undefined) markChangesRecursively(draft[_i2]);\n        }\n    }\n}\n\nfunction hasObjectChanges(state) {\n    var base = state.base,\n        draft = state.draft;\n\n    // Search for added keys. Start at the back, because non-numeric keys\n    // are ordered by time of definition on the object.\n\n    var keys = Object.keys(draft);\n    for (var i = keys.length - 1; i >= 0; i--) {\n        // The `undefined` check is a fast path for pre-existing keys.\n        if (base[keys[i]] === undefined && !has(base, keys[i])) {\n            return true;\n        }\n    }\n\n    // Since no keys have been added, we can compare lengths to know if an\n    // object has been deleted.\n    return keys.length !== Object.keys(base).length;\n}\n\nfunction hasArrayChanges(state) {\n    var draft = state.draft;\n\n    if (draft.length !== state.base.length) return true;\n    // See #116\n    // If we first shorten the length, our array interceptors will be removed.\n    // If after that new items are added, result in the same original length,\n    // those last items will have no intercepting property.\n    // So if there is no own descriptor on the last position, we know that items were removed and added\n    // N.B.: splice, unshift, etc only shift values around, but not prop descriptors, so we only have to check\n    // the last one\n    var descriptor = Object.getOwnPropertyDescriptor(draft, draft.length - 1);\n    // descriptor can be null, but only for newly created sparse arrays, eg. new Array(10)\n    if (descriptor && !descriptor.get) return true;\n    // For all other cases, we don't have to compare, as they would have been picked up by the index setters\n    return false;\n}\n\nfunction createHiddenProperty(target, prop, value) {\n    Object.defineProperty(target, prop, {\n        value: value,\n        enumerable: false,\n        writable: true\n    });\n}\n\n\n\nvar legacyProxy = Object.freeze({\n\tscopes: scopes,\n\tcurrentScope: currentScope,\n\twillFinalize: willFinalize,\n\tcreateDraft: createDraft\n});\n\n// @ts-check\n\n// For nested produce calls:\nvar scopes$1 = [];\nvar currentScope$1 = function currentScope() {\n    return scopes$1[scopes$1.length - 1];\n};\n\n// Do nothing before being finalized.\nfunction willFinalize$1() {}\n\nfunction createDraft$1(base, parent) {\n    var state = {\n        // Track which produce call this is associated with.\n        scope: parent ? parent.scope : currentScope$1(),\n        // True for both shallow and deep changes.\n        modified: false,\n        // Used during finalization.\n        finalized: false,\n        // Track which properties have been assigned (true) or deleted (false).\n        assigned: {},\n        // The parent draft state.\n        parent: parent,\n        // The base state.\n        base: base,\n        // The base proxy.\n        draft: null,\n        // Any property proxies.\n        drafts: {},\n        // The base copy with any updated values.\n        copy: null,\n        // Called by the `produce` function.\n        revoke: null\n    };\n\n    var _ref = Array.isArray(base) ? Proxy.revocable([state], arrayTraps) : Proxy.revocable(state, objectTraps),\n        revoke = _ref.revoke,\n        proxy = _ref.proxy;\n\n    state.draft = proxy;\n    state.revoke = revoke;\n\n    state.scope.push(state);\n    return proxy;\n}\n\nvar objectTraps = {\n    get: get$1,\n    has: function has$$1(target, prop) {\n        return prop in source$1(target);\n    },\n    ownKeys: function ownKeys(target) {\n        return Reflect.ownKeys(source$1(target));\n    },\n\n    set: set$1,\n    deleteProperty: deleteProperty,\n    getOwnPropertyDescriptor: getOwnPropertyDescriptor,\n    defineProperty: defineProperty$1,\n    setPrototypeOf: function setPrototypeOf() {\n        throw new Error(\"Immer does not support `setPrototypeOf()`.\");\n    }\n};\n\nvar arrayTraps = {};\neach(objectTraps, function (key, fn) {\n    arrayTraps[key] = function () {\n        arguments[0] = arguments[0][0];\n        return fn.apply(this, arguments);\n    };\n});\narrayTraps.deleteProperty = function (state, prop) {\n    if (isNaN(parseInt(prop))) throw new Error(\"Immer does not support deleting properties from arrays: \" + prop);\n    return objectTraps.deleteProperty.call(this, state[0], prop);\n};\narrayTraps.set = function (state, prop, value) {\n    if (prop !== \"length\" && isNaN(parseInt(prop))) throw new Error(\"Immer does not support setting non-numeric properties on arrays: \" + prop);\n    return objectTraps.set.call(this, state[0], prop, value);\n};\n\nfunction source$1(state) {\n    return state.copy || state.base;\n}\n\nfunction get$1(state, prop) {\n    if (prop === DRAFT_STATE) return state;\n    var drafts = state.drafts;\n\n    // Check for existing draft in unmodified state.\n\n    if (!state.modified && has(drafts, prop)) {\n        return drafts[prop];\n    }\n\n    var value = source$1(state)[prop];\n    if (state.finalized || !isDraftable(value)) return value;\n\n    // Check for existing draft in modified state.\n    if (state.modified) {\n        // Assigned values are never drafted. This catches any drafts we created, too.\n        if (value !== state.base[prop]) return value;\n        // Store drafts on the copy (when one exists).\n        drafts = state.copy;\n    }\n\n    return drafts[prop] = createDraft$1(value, state);\n}\n\nfunction set$1(state, prop, value) {\n    if (!state.modified) {\n        // Optimize based on value's truthiness. Truthy values are guaranteed to\n        // never be undefined, so we can avoid the `in` operator. Lastly, truthy\n        // values may be drafts, but falsy values are never drafts.\n        var isUnchanged = value ? is(state.base[prop], value) || value === state.drafts[prop] : is(state.base[prop], value) && prop in state.base;\n        if (isUnchanged) return true;\n        markChanged$1(state);\n    }\n    state.assigned[prop] = true;\n    state.copy[prop] = value;\n    return true;\n}\n\nfunction deleteProperty(state, prop) {\n    // The `undefined` check is a fast path for pre-existing keys.\n    if (state.base[prop] !== undefined || prop in state.base) {\n        state.assigned[prop] = false;\n        markChanged$1(state);\n    }\n    if (state.copy) delete state.copy[prop];\n    return true;\n}\n\nfunction getOwnPropertyDescriptor(state, prop) {\n    var owner = state.modified ? state.copy : has(state.drafts, prop) ? state.drafts : state.base;\n    var descriptor = Reflect.getOwnPropertyDescriptor(owner, prop);\n    if (descriptor && !(Array.isArray(owner) && prop === \"length\")) descriptor.configurable = true;\n    return descriptor;\n}\n\nfunction defineProperty$1() {\n    throw new Error(\"Immer does not support defining properties on draft objects.\");\n}\n\nfunction markChanged$1(state) {\n    if (!state.modified) {\n        state.modified = true;\n        state.copy = assign(shallowCopy(state.base), state.drafts);\n        state.drafts = null;\n        if (state.parent) markChanged$1(state.parent);\n    }\n}\n\nvar modernProxy = Object.freeze({\n\tscopes: scopes$1,\n\tcurrentScope: currentScope$1,\n\twillFinalize: willFinalize$1,\n\tcreateDraft: createDraft$1\n});\n\nfunction verifyMinified() {}\n\nvar configDefaults = {\n    useProxies: typeof Proxy !== \"undefined\" && typeof Reflect !== \"undefined\",\n    autoFreeze: typeof process !== \"undefined\" ? process.env.NODE_ENV !== \"production\" : verifyMinified.name === \"verifyMinified\",\n    onAssign: null,\n    onDelete: null,\n    onCopy: null\n};\n\nvar Immer = function () {\n    function Immer(config) {\n        classCallCheck(this, Immer);\n\n        assign(this, configDefaults, config);\n        this.setUseProxies(this.useProxies);\n        this.produce = this.produce.bind(this);\n    }\n\n    createClass(Immer, [{\n        key: \"produce\",\n        value: function produce(base, recipe, patchListener) {\n            var _this = this;\n\n            // curried invocation\n            if (typeof base === \"function\" && typeof recipe !== \"function\") {\n                var defaultBase = recipe;\n                recipe = base;\n\n                // prettier-ignore\n                return function () {\n                    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                        args[_key - 1] = arguments[_key];\n                    }\n\n                    var base = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultBase;\n                    return _this.produce(base, function (draft) {\n                        var _recipe;\n\n                        return (_recipe = recipe).call.apply(_recipe, [draft, draft].concat(args));\n                    });\n                };\n            }\n\n            // prettier-ignore\n            {\n                if (typeof recipe !== \"function\") throw new Error(\"if first argument is not a function, the second argument to produce should be a function\");\n                if (patchListener !== undefined && typeof patchListener !== \"function\") throw new Error(\"the third argument of a producer should not be set or a function\");\n            }\n\n            var result = void 0;\n            // Only create proxies for plain objects/arrays.\n            if (!isDraftable(base)) {\n                result = recipe(base);\n                if (result === undefined) return base;\n            }\n            // See #100, don't nest producers\n            else if (isDraft(base)) {\n                    result = recipe.call(base, base);\n                    if (result === undefined) return base;\n                }\n                // The given value must be proxied.\n                else {\n                        this.scopes.push([]);\n                        var baseDraft = this.createDraft(base);\n                        try {\n                            result = recipe.call(baseDraft, baseDraft);\n                            this.willFinalize(result, baseDraft, !!patchListener);\n\n                            // Never generate patches when no listener exists.\n                            var patches = patchListener && [],\n                                inversePatches = patchListener && [];\n\n                            // Finalize the modified draft...\n                            if (result === undefined || result === baseDraft) {\n                                result = this.finalize(baseDraft, [], patches, inversePatches);\n                            }\n                            // ...or use a replacement value.\n                            else {\n                                    // Users must never modify the draft _and_ return something else.\n                                    if (baseDraft[DRAFT_STATE].modified) throw new Error(\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\"); // prettier-ignore\n\n                                    // Finalize the replacement in case it contains (or is) a subset of the draft.\n                                    if (isDraftable(result)) result = this.finalize(result);\n\n                                    if (patchListener) {\n                                        patches.push({\n                                            op: \"replace\",\n                                            path: [],\n                                            value: result\n                                        });\n                                        inversePatches.push({\n                                            op: \"replace\",\n                                            path: [],\n                                            value: base\n                                        });\n                                    }\n                                }\n                        } finally {\n                            this.currentScope().forEach(function (state) {\n                                return state.revoke();\n                            });\n                            this.scopes.pop();\n                        }\n                        patchListener && patchListener(patches, inversePatches);\n                    }\n            // Normalize the result.\n            return result === NOTHING ? undefined : result;\n        }\n    }, {\n        key: \"setAutoFreeze\",\n        value: function setAutoFreeze(value) {\n            this.autoFreeze = value;\n        }\n    }, {\n        key: \"setUseProxies\",\n        value: function setUseProxies(value) {\n            this.useProxies = value;\n            assign(this, value ? modernProxy : legacyProxy);\n        }\n        /**\n         * @internal\n         * Finalize a draft, returning either the unmodified base state or a modified\n         * copy of the base state.\n         */\n\n    }, {\n        key: \"finalize\",\n        value: function finalize(draft, path, patches, inversePatches) {\n            var state = draft[DRAFT_STATE];\n            if (!state) {\n                if (Object.isFrozen(draft)) return draft;\n                return this.finalizeTree(draft);\n            }\n            // Never finalize drafts owned by an outer scope.\n            if (state.scope !== this.currentScope()) {\n                return draft;\n            }\n            if (!state.modified) return state.base;\n            if (!state.finalized) {\n                state.finalized = true;\n                this.finalizeTree(state.draft, path, patches, inversePatches);\n                if (this.onDelete) {\n                    var assigned = state.assigned;\n\n                    for (var prop in assigned) {\n                        assigned[prop] || this.onDelete(state, prop);\n                    }\n                }\n                if (this.onCopy) this.onCopy(state);\n\n                // Nested producers must never auto-freeze their result,\n                // because it may contain drafts from parent producers.\n                if (this.autoFreeze && this.scopes.length === 1) {\n                    Object.freeze(state.copy);\n                }\n\n                if (patches) generatePatches(state, path, patches, inversePatches);\n            }\n            return state.copy;\n        }\n        /**\n         * @internal\n         * Finalize all drafts in the given state tree.\n         */\n\n    }, {\n        key: \"finalizeTree\",\n        value: function finalizeTree(root, path, patches, inversePatches) {\n            var _this2 = this;\n\n            var state = root[DRAFT_STATE];\n            if (state) {\n                root = this.useProxies ? state.copy : state.copy = shallowCopy(state.draft);\n            }\n\n            var onAssign = this.onAssign;\n\n            var finalizeProperty = function finalizeProperty(prop, value, parent) {\n                // Only `root` can be a draft in here.\n                var inDraft = !!state && parent === root;\n\n                if (isDraft(value)) {\n                    // prettier-ignore\n                    parent[prop] = value =\n                    // Patches are never generated for assigned properties.\n                    patches && inDraft && !state.assigned[prop] ? _this2.finalize(value, path.concat(prop), patches, inversePatches) : _this2.finalize(value);\n\n                    // Unchanged drafts are ignored.\n                    if (inDraft && value === state.base[prop]) return;\n                }\n                // Unchanged draft properties are ignored.\n                else if (inDraft && is(value, state.base[prop])) {\n                        return;\n                    }\n                    // Search new objects for unfinalized drafts. Frozen objects should never contain drafts.\n                    else if (isDraftable(value) && !Object.isFrozen(value)) {\n                            each(value, finalizeProperty);\n                        }\n\n                if (inDraft && onAssign) {\n                    onAssign(state, prop, value);\n                }\n            };\n\n            each(root, finalizeProperty);\n            return root;\n        }\n    }]);\n    return Immer;\n}();\n\nvar immer = new Immer();\n\n/**\n * The `produce` function takes a value and a \"recipe function\" (whose\n * return value often depends on the base state). The recipe function is\n * free to mutate its first argument however it wants. All mutations are\n * only ever applied to a __copy__ of the base state.\n *\n * Pass only a function to create a \"curried producer\" which relieves you\n * from passing the recipe function every time.\n *\n * Only plain objects and arrays are made mutable. All other objects are\n * considered uncopyable.\n *\n * Note: This function is __bound__ to its `Immer` instance.\n *\n * @param {any} base - the initial state\n * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n * @param {Function} patchListener - optional function that will be called with all the patches produced here\n * @returns {any} a new state, or the initial state if nothing was modified\n */\nvar produce = immer.produce;\n/**\n * Pass true to automatically freeze all copies created by Immer.\n *\n * By default, auto-freezing is disabled in production.\n */\nvar setAutoFreeze = function setAutoFreeze(value) {\n  return immer.setAutoFreeze(value);\n};\n\n/**\n * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n * always faster than using ES5 proxies.\n *\n * By default, feature detection is used, so calling this is rarely necessary.\n */\nvar setUseProxies = function setUseProxies(value) {\n  return immer.setUseProxies(value);\n};\n\n/**\n * Apply an array of Immer patches to the first argument.\n *\n * This function is a producer, which means copy-on-write is in effect.\n */\nvar applyPatches$1 = produce(applyPatches);\n\nexport { produce, setAutoFreeze, setUseProxies, applyPatches$1 as applyPatches, Immer, original, isDraft, NOTHING as nothing };\nexport default produce;\n//# sourceMappingURL=immer.module.js.map\n","import { CommentDetails } from '../../../interfaces'\nimport produce from 'immer'\nimport { CommentPageActions } from './actions'\n\nexport const commentsReducer = (\n  comments: { [key: string]: CommentDetails },\n  action: { type: CommentPageActions; payload: any }\n): { [key: string]: CommentDetails } => {\n  console.log('reducer', comments, action)\n  switch (action.type) {\n    case CommentPageActions.COMMENTS_LOADED:\n      return { ...action.payload }\n    case CommentPageActions.UPVOTE_COMMENT:\n      return produce(comments, draftComments => {\n        draftComments[action.payload.commentHex].score += 1\n      })\n    case CommentPageActions.DOWNVOTE_COMMENT:\n      return produce(comments, draftComments => {\n        draftComments[action.payload.commentHex].score -= 1\n      })\n    case CommentPageActions.ADD_NEW_COMMENT:\n      return produce(comments, draftComments => {\n        draftComments[action.payload.commentHex] = action.payload\n      })\n    case CommentPageActions.UPDATE_COMMENT: {\n      return produce(comments, draftComments => {\n        draftComments[action.payload.commentHex] = action.payload\n      })\n    }\n    case CommentPageActions.DELETE_COMMENT: {\n      return produce(comments, draftComments => {\n        delete draftComments[action.payload.commentHex]\n      })\n    }\n    default:\n      return comments\n  }\n}\n","import React, { useCallback } from 'react'\r\nimport { useCommentPageContext } from '../CommentsPage/CommentPageContext'\r\nimport { voteComment, deleteComment } from '../../utils/commentoApi'\r\nimport { CommentPageActions } from '../CommentsPage/CommentPageReducer'\r\n\r\ninterface CommentActionsProps {\r\n  commentHex: string\r\n  onCollapseClick: () => void\r\n  onEditClick: () => void\r\n  isOwnComment: boolean\r\n  onReplyClick: () => void\r\n  repliesCollapsed: boolean\r\n}\r\n\r\nexport const CommentActions: React.FC<CommentActionsProps> = ({\r\n  commentHex,\r\n  onCollapseClick,\r\n  onEditClick,\r\n  isOwnComment,\r\n  onReplyClick,\r\n  repliesCollapsed\r\n}) => {\r\n  const { commentDispatch } = useCommentPageContext()\r\n\r\n  const upvoteComment = useCallback(async () => {\r\n    await voteComment(1, commentHex)\r\n    commentDispatch({\r\n      type: CommentPageActions.UPVOTE_COMMENT,\r\n      payload: {\r\n        commentHex: commentHex\r\n      }\r\n    })\r\n  }, [commentHex])\r\n\r\n  const downvoteComment = useCallback(async () => {\r\n    await voteComment(-1, commentHex)\r\n    commentDispatch({\r\n      type: CommentPageActions.DOWNVOTE_COMMENT,\r\n      payload: {\r\n        commentHex: commentHex\r\n      }\r\n    })\r\n  }, [commentHex])\r\n\r\n  const handleDeleteComment = useCallback(async () => {\r\n    await deleteComment(commentHex)\r\n    commentDispatch({\r\n      type: CommentPageActions.DELETE_COMMENT,\r\n      payload: {\r\n        commentHex: commentHex\r\n      }\r\n    })\r\n  }, [commentHex])\r\n\r\n  return (\r\n    <div className='commentActions'>\r\n      {!isOwnComment && (\r\n        <React.Fragment>\r\n          <button onClick={onReplyClick} className='commento-button'>\r\n            Reply\r\n          </button>\r\n          <button onClick={upvoteComment} className='commento-button'>\r\n            Upvote\r\n          </button>\r\n          <button onClick={downvoteComment} className='commento-button'>\r\n            Downvote\r\n          </button>\r\n        </React.Fragment>\r\n      )}\r\n      {isOwnComment && (\r\n        <React.Fragment>\r\n          <button onClick={onEditClick} className='commento-button'>\r\n            Edit\r\n          </button>\r\n          <button onClick={handleDeleteComment} className='commento-button'>\r\n            Delete\r\n          </button>\r\n        </React.Fragment>\r\n      )}\r\n      <button onClick={onCollapseClick} className='commento-button'>\r\n        {repliesCollapsed ? 'Expand Replies' : 'Collapse Replies'}\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\nimport { UserDetails, CommentDetails } from '../../interfaces'\n\ninterface CommentHeaderProps {\n  userData: UserDetails\n  commentData: CommentDetails\n}\n\nexport const CommentHeader: React.FC<CommentHeaderProps> = ({\n  userData,\n  commentData\n}) => {\n  return (\n    <div className='commentHeader'>\n      {commentData.deleted && userData.photo ? (\n        <div className='anonymous-image'>?</div>\n      ) : (\n        <img src={userData.photo} alt='User Image' className='avatar' />\n      )}\n      <div className='commentHeader_content'>\n        <p className='username'>{userData.name}</p>\n        <div className='commentStats'>\n          <span className='votes'>{commentData.score} Likes</span> |{' '}\n          <span className='date'>{commentData.creationDate}</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React, { useState, useCallback } from 'react'\nimport { updateComment } from '../../utils/commentoApi'\nimport { useCommentPageContext } from '../CommentsPage/CommentPageContext'\nimport { CommentPageActions } from '../CommentsPage/CommentPageReducer'\nimport { CommentDetails } from '../../interfaces'\n\ninterface EditCommentProps {\n  commentDetails: CommentDetails\n  onEditSuccess: () => void\n}\n\nexport const EditComment: React.FC<EditCommentProps> = ({\n  commentDetails,\n  onEditSuccess\n}) => {\n  const [commentBody, setCommentBody] = useState<string>(\n    commentDetails.markdown\n  )\n  const { commentDispatch } = useCommentPageContext()\n  const handleSubmit = useCallback(async () => {\n    const { comment } = await updateComment(commentDetails, commentBody)\n    console.log('handleSubmit -> comment', comment)\n    commentDispatch({\n      payload: comment,\n      type: CommentPageActions.UPDATE_COMMENT\n    })\n    onEditSuccess()\n  }, [commentDetails, commentBody])\n\n  const handleCommentBodyChange = (e: any) => {\n    const newCommentBody = e.target.value\n    console.log('handleCommentBodyChange -> newCommentBody', newCommentBody)\n    setCommentBody(newCommentBody)\n  }\n\n  return (\n    <div className='edit-comment-box'>\n      <textarea\n        value={commentBody}\n        onChange={handleCommentBodyChange}\n        style={{ marginTop: '1rem' }}\n      />\n      <button onClick={handleSubmit} className='commento-button'>\n        submit\n      </button>\n    </div>\n  )\n}\n","import React, { useCallback, useState } from 'react'\r\nimport { addNewComment, addReplyToComment } from '../../utils/commentoApi'\r\nimport { useCommentPageContext } from './CommentPageContext'\r\nimport { CommentPageActions } from './CommentPageReducer'\r\n\r\ninterface AddNewCommentProps {\r\n  pageId: string\r\n  parentHex?: string\r\n  onSuccess?: () => void\r\n}\r\n\r\nexport const AddNewCommnet: React.FC<AddNewCommentProps> = ({\r\n  pageId,\r\n  parentHex,\r\n  onSuccess\r\n}) => {\r\n  const [commentBody, setCommentBody] = useState<string>('')\r\n  const { commentDispatch, currentCommenterDetails } = useCommentPageContext()\r\n  const handleSubmit = useCallback(async () => {\r\n    if (parentHex) {\r\n      const { comment: newComment } = await addReplyToComment({\r\n        commentMarkdown: commentBody,\r\n        path: pageId,\r\n        parentHex,\r\n        commenterHex: currentCommenterDetails.commenterHex\r\n      })\r\n      commentDispatch({\r\n        type: CommentPageActions.ADD_NEW_COMMENT,\r\n        payload: newComment\r\n      })\r\n    } else {\r\n      const { comment: newComment } = await addNewComment({\r\n        commentMarkdown: commentBody,\r\n        path: pageId,\r\n        commenterHex: currentCommenterDetails.commenterHex\r\n      })\r\n      commentDispatch({\r\n        type: CommentPageActions.ADD_NEW_COMMENT,\r\n        payload: newComment\r\n      })\r\n    }\r\n    setCommentBody('')\r\n    onSuccess && onSuccess()\r\n  }, [pageId, commentBody])\r\n\r\n  const handleCommentBodyChange = (e: any) => {\r\n    const newCommentBody = e.target.value\r\n    setCommentBody(newCommentBody)\r\n  }\r\n  return (\r\n    <div className='edit-comment-box'>\r\n      <textarea\r\n        value={commentBody}\r\n        onChange={handleCommentBodyChange}\r\n        placeholder='Add a new comment'\r\n      />\r\n      <button onClick={handleSubmit} className='commento-button'>\r\n        Submit\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useMemo, useState, useCallback } from 'react'\nimport { CommentDetails } from '../../interfaces'\nimport { CommentActions } from './CommentActions'\nimport { CommentHeader } from './UserDetails'\nimport classnames from 'classnames'\nimport { EditComment } from './EditComment'\nimport { AddNewCommnet } from '../CommentsPage/AddNewComment'\nimport { useCommentPageContext } from '../CommentsPage/CommentPageContext'\nimport {\n  sortCommentByCreationDate,\n  CommentSortTypes\n} from '../../utils/commentoApi'\ninterface CommentProps {\n  commentDetails: CommentDetails\n}\n\nexport const Comment: React.FC<CommentProps> = ({ commentDetails }) => {\n  const {\n    pageId,\n    currentCommenterDetails,\n    commenters\n  } = useCommentPageContext()\n\n  const [editModeOpen, setEditModeOpen] = useState<boolean>(false)\n  const [replyMode, setReplyMode] = useState<boolean>(false)\n  const [collapseChildren, setCollapseChildren] = useState<boolean>(false)\n  const isOwnComment = useMemo<boolean>(() => {\n    return commentDetails.commenterHex === currentCommenterDetails.commenterHex\n  }, [currentCommenterDetails, commentDetails])\n\n  const { replies, hasReplies } = useMemo<{\n    replies: boolean | CommentDetails[]\n    hasReplies: boolean\n  }>(() => {\n    const hasReplies =\n      !!commentDetails.replies &&\n      Object.values(commentDetails.replies).length > 0\n    const replies =\n      hasReplies &&\n      sortCommentByCreationDate(\n        CommentSortTypes.desc,\n        Object.values(commentDetails.replies)\n      )\n    return { replies, hasReplies }\n  }, [commentDetails.replies])\n\n  const handleOnEditClick = useCallback(\n    () => setEditModeOpen(prev => !prev),\n    []\n  )\n  const handleOnCollapseClick = useCallback(\n    () => setCollapseChildren(prev => !prev),\n    []\n  )\n  const handleReplyClick = useCallback(() => setReplyMode(prev => !prev), [])\n  return (\n    <div className='comment-wrapper'>\n      {/* Render the user details, comment and its actions */}\n      <div className='commentBody'>\n        <CommentHeader\n          userData={\n            isOwnComment\n              ? currentCommenterDetails\n              : commenters[commentDetails.commenterHex]\n          }\n          commentData={commentDetails}\n        />\n        {editModeOpen ? (\n          <EditComment\n            commentDetails={commentDetails}\n            onEditSuccess={handleOnEditClick}\n          />\n        ) : (\n          <div\n            className='commentContainer'\n            dangerouslySetInnerHTML={{ __html: commentDetails.html }}\n          />\n        )}\n        <CommentActions\n          commentHex={commentDetails.commentHex}\n          onEditClick={handleOnEditClick}\n          onCollapseClick={handleOnCollapseClick}\n          isOwnComment={isOwnComment}\n          onReplyClick={handleReplyClick}\n          repliesCollapsed={collapseChildren}\n        />\n      </div>\n      {replyMode && (\n        <div className='repliesContianer'>\n          <AddNewCommnet\n            pageId={pageId}\n            parentHex={commentDetails.commentHex}\n            onSuccess={handleReplyClick}\n          />\n        </div>\n      )}\n\n      {hasReplies && (\n        <div\n          className={classnames('repliesContianer', {\n            collapsed: collapseChildren\n          })}\n        >\n          {(replies as CommentDetails[]).map((reply: CommentDetails) => (\n            <Comment key={reply.commentHex} commentDetails={reply} />\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default Comment\n","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import React, { useState, useEffect, useContext } from 'react'\nimport * as commentoApi from '../../utils/commentoApi'\nimport { initializeAxiosInstance } from '../../utils/axios'\nimport { UserDetails } from '../../interfaces'\n\ninterface CommentoAuthProviderProps {\n  sso?: boolean\n  ssoToken?: string\n  username?: string\n  password?: string\n  ssoProvider?: string\n  commentoOrigin: string\n}\n\ninterface CommentoAuthContextValue {\n  isAuthenticated: boolean\n  commenterToken: string | null\n  userDetails: UserDetails\n  isAuthenticating: boolean\n}\n\nconst CommentoAuthContext = React.createContext<CommentoAuthContextValue>({\n  isAuthenticated: false,\n  commenterToken: null,\n  userDetails: {} as UserDetails,\n  isAuthenticating: false\n})\n\nexport const useCommentoAuthContext = () => useContext(CommentoAuthContext)\nexport const CommnetoAuthProvider: React.FC<CommentoAuthProviderProps> = ({\n  children,\n  sso,\n  ssoToken,\n  commentoOrigin\n}) => {\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false)\n  const [commenterToken, setCommenterToken] = useState<string>('')\n  const [userDetails, setUserDetails] = useState<UserDetails>({} as UserDetails)\n  const [isAuthenticating, setIsAuthenticating] = useState(false)\n\n  useEffect(() => {\n    if (sso) {\n      setIsAuthenticating(true)\n      const doSSOAuthentication = async (ssoToken: string) => {\n        try {\n          const {\n            commenterToken,\n            success,\n            userDetails\n          } = await commentoApi.ssoAuth(commentoOrigin, ssoToken)\n          if (success) {\n            const domain = (userDetails as UserDetails).provider.split(':')[1]\n            await initializeAxiosInstance(\n              commentoOrigin,\n              commenterToken as string,\n              domain,\n              ssoToken\n            )\n            setCommenterToken(commenterToken as string)\n            setUserDetails(userDetails as UserDetails)\n            setIsAuthenticated(true)\n          } else {\n            setIsAuthenticated(false)\n          }\n        } catch (error) {\n          setIsAuthenticated(false)\n        }\n        setIsAuthenticating(false)\n      }\n      doSSOAuthentication(ssoToken as string)\n    }\n  }, [sso, ssoToken, commentoOrigin])\n\n  return (\n    <CommentoAuthContext.Provider\n      value={{\n        isAuthenticated,\n        commenterToken,\n        userDetails,\n        isAuthenticating\n      }}\n    >\n      {children}\n    </CommentoAuthContext.Provider>\n  )\n}\n\nexport default CommentoAuthContext\n","/* loaded by smart-asset */\nexport default require(\"./loading~xCZVzgKY.gif\")","import React, { useState, useEffect, useReducer } from 'react'\nimport { CommentDetails, UserDetails } from '../../interfaces'\nimport Comment from '../Comment'\nimport { useCommentoAuthContext } from '../CommentoAuthContext'\nimport { CommentPageContext } from './CommentPageContext'\nimport {\n  fetchComments,\n  sortCommentByCreationDate,\n  CommentSortTypes\n} from '../../utils/commentoApi'\nimport { AddNewCommnet } from './AddNewComment'\nimport { commentsReducer, CommentPageActions } from './CommentPageReducer'\nimport turndownService from '../../utils/turndown'\nimport cloneDeep from 'lodash.clonedeep'\nimport LoadingGif from '../../assets/loading.gif'\ninterface CommentPageProps {\n  pageId: string\n  allowOnlyOneRootComment?: boolean\n}\n\nconst convertArrayToKeyValuePairs = (comments: CommentDetails[]) => {\n  return comments.reduce((acc, comment) => {\n    if (comment.deleted && !(comment.parentHex === 'root')) return acc\n    acc[comment.commentHex] = comment\n    return acc\n  }, {})\n}\n\nconst mergeRepliesToRootComments = (comments: {\n  [key: string]: CommentDetails\n}): { [key: string]: CommentDetails } => {\n  console.log(comments)\n  const reducedComments: {\n    [key: string]: CommentDetails\n  } = cloneDeep(comments)\n  const KeyPaths = Object.keys(reducedComments).reduce((acc, key) => {\n    acc[key] = []\n    return acc\n  }, {})\n  Object.values(reducedComments).forEach(comment => {\n    const isChild = comment.parentHex !== 'root'\n    const isDeleted = comment.deleted\n    if (isChild && !isDeleted) {\n      const newKeyPath = [...KeyPaths[comment.parentHex], comment.parentHex]\n      KeyPaths[comment.commentHex] = newKeyPath\n      const entryPoint: CommentDetails = newKeyPath.reduce(\n        (entryPoint, key) => {\n          if (entryPoint[key]) return entryPoint[key]\n          return entryPoint.replies[key]\n        },\n        reducedComments\n      )\n      if (!entryPoint.replies) entryPoint.replies = {}\n      entryPoint.replies[comment.commentHex] = comment\n      delete reducedComments[comment.commentHex]\n    }\n  })\n  return reducedComments\n}\n\nconst addMarkdownToComments = (comments: CommentDetails[]) =>\n  comments.map(comment => {\n    comment.markdown = turndownService.turndown(comment.html)\n    return comment\n  })\n\nconst removeDeletedCommentsWithNoReplies = (comments: CommentDetails[]) =>\n  comments.filter(comment => !(comment.deleted && !comment.replies))\n\nexport const CommentsPage: React.FC<CommentPageProps> = ({\n  pageId,\n  allowOnlyOneRootComment\n}) => {\n  const [commentsLoaded, setCommentsLoaded] = useState<boolean>(false)\n  const [comments, commentDispatch] = useReducer(commentsReducer, {})\n  const [commenters, setCommentors] = useState<UserDetails[]>([])\n  const {\n    isAuthenticated,\n    userDetails,\n    isAuthenticating\n  } = useCommentoAuthContext()\n  const commentValues = sortCommentByCreationDate(\n    CommentSortTypes.desc,\n    removeDeletedCommentsWithNoReplies(\n      Object.values(mergeRepliesToRootComments(comments))\n    )\n  )\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      const getComments = async () => {\n        // get comments usins the commentoProvider\n        const { comments, commenters } = await fetchComments(pageId)\n        commentDispatch({\n          type: CommentPageActions.COMMENTS_LOADED,\n          payload: convertArrayToKeyValuePairs(addMarkdownToComments(comments))\n        })\n        setCommentors(commenters)\n        setCommentsLoaded(true)\n      }\n      getComments()\n    }\n  }, [pageId, isAuthenticated])\n\n  if (isAuthenticating) {\n    return (\n      <div className='comments-page'>\n        <div className='commento-alert'>\n          Authenticating the user{' '}\n          <img src={LoadingGif} className='loading-gif' />\n        </div>\n      </div>\n    )\n  } else if (!isAuthenticated && !isAuthenticating) {\n    return (\n      <div className='comments-page'>\n        <div className='commento-alert'>\n          You are not authorized to access this comment stream\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    // Pass dispatch for useReducer in the provider value so that CommentActions can dispatch action to modify a particular comment\n    <CommentPageContext.Provider\n      value={{\n        pageId,\n        currentCommenterDetails: userDetails,\n        commenters,\n        commentDispatch\n      }}\n    >\n      <div className='comments-page'>\n        <div className='commentHeader userdetails'>\n          <img src={userDetails.photo} alt='User Image' className='avatar' />\n          <div className='commentHeader_content'>\n            <p className='username'>{userDetails.name}</p>\n          </div>\n        </div>\n        {commentValues.length > 0 && allowOnlyOneRootComment ? null : (\n          <AddNewCommnet pageId={pageId} />\n        )}\n\n        {commentsLoaded ? (\n          <div className='commentslist-wrapper'>\n            {commentValues.map(comment => (\n              <Comment key={comment.commentHex} commentDetails={comment} />\n            ))}\n          </div>\n        ) : (\n          <div style={{ paddingTop: '1rem' }}>\n            <div className='commento-alert'>\n              Loading the comment stream{' '}\n              <img src={LoadingGif} className='loading-gif' />\n            </div>\n          </div>\n        )}\n      </div>\n    </CommentPageContext.Provider>\n  )\n}\n","import React, { useState, useEffect, ReactNode } from 'react'\nimport { useCommentoAuthContext } from '../CommentoAuthContext'\nimport { fetchComments } from '../../utils/commentoApi'\n\ninterface CommentsCountProps {\n  pageId: string\n  children: (\n    commentsLength: number,\n    commentsLoaded: Boolean,\n    isAuthenticated: Boolean,\n    isAuthenticating: Boolean\n  ) => ReactNode\n}\n\nexport const CommentsCount: React.FC<CommentsCountProps> = ({\n  pageId,\n  children\n}) => {\n  const [commentsLoaded, setCommentsLoaded] = useState<boolean>(false)\n  const [commentsLength, setcommentsLength] = useState(0)\n  const { isAuthenticated, isAuthenticating } = useCommentoAuthContext()\n  useEffect(() => {\n    if (isAuthenticated) {\n      const getComments = async () => {\n        // get comments usins the commentoProvider\n        const { comments } = await fetchComments(pageId)\n        setcommentsLength(comments.length)\n        setCommentsLoaded(true)\n      }\n      getComments()\n    }\n  }, [pageId, isAuthenticated])\n\n  return (\n    <div>\n      {children(\n        commentsLength,\n        commentsLoaded,\n        isAuthenticated,\n        isAuthenticating\n      )}\n    </div>\n  )\n}\n"],"names":["CommentPageContext","React","createContext","pageId","currentCommenterDetails","commenters","commentDispatch","useCommentPageContext","useContext","_axios","getAxiosInstance","initializeAxiosInstance","commentoOrigin","commenterToken","domain","auth0Token","axios","create","baseURL","headers","Authorization","data","turndownService","TurnDownService","ssoAuth","ssoToken","get","then","res","authenticationSucess","success","post","commenter","selfGetSuccess","userDetails","fetchComments","path","defaults","comments","voteComment","direction","commentHex","deleteComment","updateComment","commentDetails","newCommentBody","markdown","html","comment","turndown","addNewComment","commentMarkdown","commenterHex","parentHex","createComment","addReplyToComment","deleted","score","replies","creationDate","Date","toISOString","CommentSortTypes","sortCommentByCreationDate","type","sort","a","b","timeA","getTime","timeB","asc","desc","CommentPageActions","commentsReducer","action","console","log","COMMENTS_LOADED","payload","UPVOTE_COMMENT","produce","draftComments","DOWNVOTE_COMMENT","ADD_NEW_COMMENT","UPDATE_COMMENT","DELETE_COMMENT","CommentActions","onCollapseClick","onEditClick","isOwnComment","onReplyClick","repliesCollapsed","upvoteComment","useCallback","downvoteComment","handleDeleteComment","className","Fragment","onClick","CommentHeader","userData","commentData","photo","src","alt","name","EditComment","onEditSuccess","useState","commentBody","setCommentBody","handleSubmit","handleCommentBodyChange","e","target","value","onChange","style","marginTop","AddNewCommnet","onSuccess","newComment","placeholder","Comment","editModeOpen","setEditModeOpen","replyMode","setReplyMode","collapseChildren","setCollapseChildren","useMemo","hasReplies","Object","values","length","handleOnEditClick","prev","handleOnCollapseClick","handleReplyClick","dangerouslySetInnerHTML","__html","classnames","collapsed","map","reply","key","CommentoAuthContext","isAuthenticated","isAuthenticating","useCommentoAuthContext","CommnetoAuthProvider","children","sso","setIsAuthenticated","setCommenterToken","setUserDetails","setIsAuthenticating","useEffect","doSSOAuthentication","commentoApi","provider","split","Provider","convertArrayToKeyValuePairs","reduce","acc","mergeRepliesToRootComments","reducedComments","cloneDeep","KeyPaths","keys","forEach","isChild","isDeleted","newKeyPath","entryPoint","addMarkdownToComments","removeDeletedCommentsWithNoReplies","filter","CommentsPage","allowOnlyOneRootComment","commentsLoaded","setCommentsLoaded","useReducer","setCommentors","commentValues","getComments","LoadingGif","paddingTop","CommentsCount","commentsLength","setcommentsLength"],"mappings":"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"}
